@page "/contact"
@using GroceryStore.App.Models
@using GroceryStore.App.Services.Interfaces
@layout GroceryStore.App.Components.Layout.MainLayout
@inject ISettingsService SettingsService

<PageTitle>Contact Us | Fresh Grocery</PageTitle>

<section class="section">
    <div class="container">
        <h1 class="section-title">Contact Us</h1>
        <p style="text-align:center;color:var(--text-light);max-width:600px;margin:0 auto 3rem;">
            We are here to help. Reach out via any of the channels below.
        </p>

        @if (_settings is null)
        {
            <div class="loading-spinner show"><div class="spinner"></div></div>
        }
        else
        {
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;margin-bottom:3rem;">

                <div class="contact-card" style="background:var(--surface);border-radius:var(--radius-lg);padding:2rem;text-align:center;border:1px solid var(--border);">
                    <i class="fas fa-phone" style="font-size:2.5rem;color:var(--primary);margin-bottom:1rem;"></i>
                    <h3 style="margin-bottom:.5rem;">Phone</h3>
                    <a href="tel:@_settings.Phone" style="color:var(--text-light);">@_settings.Phone</a>
                </div>

                <div class="contact-card" style="background:var(--surface);border-radius:var(--radius-lg);padding:2rem;text-align:center;border:1px solid var(--border);">
                    <i class="fab fa-whatsapp" style="font-size:2.5rem;color:#25d366;margin-bottom:1rem;"></i>
                    <h3 style="margin-bottom:.5rem;">WhatsApp</h3>
                    <a href="https://wa.me/@_settings.WhatsappNumber" style="color:var(--text-light);" target="_blank">Message Us</a>
                </div>

                <div class="contact-card" style="background:var(--surface);border-radius:var(--radius-lg);padding:2rem;text-align:center;border:1px solid var(--border);">
                    <i class="fas fa-envelope" style="font-size:2.5rem;color:var(--primary);margin-bottom:1rem;"></i>
                    <h3 style="margin-bottom:.5rem;">Email</h3>
                    <a href="mailto:@_settings.Email" style="color:var(--text-light);">@_settings.Email</a>
                </div>

                <div class="contact-card" style="background:var(--surface);border-radius:var(--radius-lg);padding:2rem;text-align:center;border:1px solid var(--border);">
                    <i class="fas fa-map-marker-alt" style="font-size:2.5rem;color:var(--primary);margin-bottom:1rem;"></i>
                    <h3 style="margin-bottom:.5rem;">Address</h3>
                    <p style="color:var(--text-light);">@_settings.Address</p>
                </div>

                <div class="contact-card" style="background:var(--surface);border-radius:var(--radius-lg);padding:2rem;text-align:center;border:1px solid var(--border);">
                    <i class="fas fa-clock" style="font-size:2.5rem;color:var(--primary);margin-bottom:1rem;"></i>
                    <h3 style="margin-bottom:.5rem;">Opening Hours</h3>
                    @foreach (var line in _settings.OpeningHours.Split('\n'))
                    {
                        <p style="color:var(--text-light);font-size:.9rem;">@line</p>
                    }
                </div>
            </div>

            @if (!string.IsNullOrWhiteSpace(_settings.GoogleMapsUrl))
            {
                <div style="border-radius:var(--radius-lg);overflow:hidden;border:2px solid var(--border);">
                    <iframe src="@_settings.GoogleMapsUrl"
                            width="100%" height="420" style="border:0;" allowfullscreen
                            loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            }
        }
    </div>
</section>

@code {
    private StoreSettings? _settings;
    protected override async Task OnInitializedAsync()
        => _settings = await SettingsService.GetSettingsAsync( );
}
